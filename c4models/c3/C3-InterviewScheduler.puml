@startuml
!define COMPONENT component
!define CONTAINER rectangle
!define DATABASE database
!define EXTERNAL_SYSTEM rectangle
!define INTERFACE interface

' Container Context
CONTAINER "candidate-service" as candidateService
CONTAINER "interview-scheduler" as interviewScheduler
CONTAINER "chatbot-interpreter" as chatbotInterpreter
CONTAINER "harvest-sync" as harvestSync
CONTAINER "config-service" as configService

' External Systems
EXTERNAL_SYSTEM "Calendar" as calendar

' Shared Database
DATABASE "MongoDB" as mongodb

' Focus Container
CONTAINER "slot-seeker" as slotSeeker {
  COMPONENT "AvailabilityProcessor" as availabilityProcessor
  COMPONENT "SkillMatcher" as skillMatcher
  COMPONENT "SlotCalculationEngine" as slotEngine
  COMPONENT "InterviewerRankingService" as rankerService
  COMPONENT "DataRepository" as dataRepository
  COMPONENT "QueryOptimizer" as queryOptimizer
  
  INTERFACE "REST API" as restApi
  INTERFACE "MongoDB Interface" as dbInterface
}

' External Connections to Container
candidateService --> restApi : "GET /available-slots"
chatbotInterpreter --> restApi : "GET /available-slots"
interviewScheduler --> restApi : "GET /interviewer-matches"
interviewScheduler --> restApi : "POST /lock-slot"

' Internal Component Connections
restApi --> queryOptimizer : "Optimizes query parameters"
queryOptimizer --> dataRepository : "Queries for data"
dataRepository --> dbInterface : "Accesses MongoDB"
dbInterface --> mongodb : "Reads synced data"

dataRepository --> availabilityProcessor : "Processes availability"
availabilityProcessor --> harvestSync : "Uses synced calendar data"
availabilityProcessor --> configService : "Gets timezone configs"
availabilityProcessor --> skillMatcher : "Filters by skills"
skillMatcher --> configService : "Gets skill requirements"
skillMatcher --> slotEngine : "Passes qualified interviewers"
slotEngine --> rankerService : "Ranks interviewers"
rankerService --> configService : "Gets ranking weights"

' Additional annotations
note right of dataRepository : "Reads data synchronized by harvest-sync\nfrom external systems"
note right of skillMatcher : "Matches candidate skills\nto interviewer expertise"
note bottom of rankerService : "Uses weighted scoring based on\nexperience, past feedback, and availability"
note left of availabilityProcessor : "Handles calendar conflicts,\ntime zone conversions, and leave plans"
@enduml